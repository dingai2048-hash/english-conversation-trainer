<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é…ç½® OpenAI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            color: #856404;
        }
        .success {
            background: #d4edda;
            border: 1px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            color: #155724;
        }
        button {
            background: #4F46E5;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #4338CA;
        }
        button.danger {
            background: #dc3545;
        }
        button.danger:hover {
            background: #c82333;
        }
        .step {
            background: #f8f9fa;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4F46E5;
            border-radius: 4px;
        }
        .step h3 {
            margin-top: 0;
            color: #4F46E5;
        }
        code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ é…ç½® OpenAI API</h1>
        
        <div class="warning">
            <h3>âš ï¸ å®‰å…¨æé†’</h3>
            <p><strong>ä½ åˆšæ‰å‘é€çš„ API Key å·²ç»æš´éœ²ï¼</strong></p>
            <p>è¯·ç«‹å³ï¼š</p>
            <ol>
                <li>è®¿é—® <a href="https://platform.openai.com/api-keys" target="_blank">https://platform.openai.com/api-keys</a></li>
                <li><strong>æ’¤é”€ï¼ˆRevokeï¼‰</strong>é‚£ä¸ª Key</li>
                <li>ç”Ÿæˆä¸€ä¸ªæ–°çš„ Key</li>
                <li>åœ¨ä¸‹é¢é…ç½®æ–°çš„ Key</li>
            </ol>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 1: è‡ªåŠ¨é…ç½® OpenAI</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œè‡ªåŠ¨é…ç½® OpenAI è®¾ç½®ï¼ˆä½¿ç”¨ä½ çš„æ–° API Keyï¼‰</p>
            <button onclick="configureOpenAI()">âœ… è‡ªåŠ¨é…ç½® OpenAI</button>
        </div>

        <div class="step">
            <h3>æ­¥éª¤ 2: éªŒè¯é…ç½®</h3>
            <p>é…ç½®å®Œæˆåï¼Œåˆ·æ–°åº”ç”¨é¡µé¢å¹¶æµ‹è¯•å¯¹è¯</p>
            <button onclick="window.open('http://localhost:3000', '_blank')">ğŸš€ æ‰“å¼€åº”ç”¨</button>
        </div>

        <div id="result"></div>
    </div>

    <script>
        function configureOpenAI() {
            const resultDiv = document.getElementById('result');
            
            try {
                // é…ç½® OpenAI è®¾ç½®
                const settings = {
                    provider: 'openai',
                    apiKey: '', // ç”¨æˆ·éœ€è¦åœ¨åº”ç”¨ä¸­è¾“å…¥æ–°çš„ Key
                    endpoint: 'https://api.openai.com/v1/chat/completions',
                    model: 'gpt-3.5-turbo',
                    systemPrompt: getDefaultSystemPrompt(),
                    ttsProvider: 'browser',
                    replicateApiKey: '',
                    replicateTTSModel: 'turbo',
                    azureSpeechKey: '',
                    azureSpeechRegion: 'eastus',
                    pronunciationEnabled: false,
                    userLevel: 'beginner',
                };

                // ä¿å­˜åˆ° localStorage
                localStorage.setItem('english-trainer-ai-settings', JSON.stringify(settings));

                resultDiv.innerHTML = `
                    <div class="success">
                        <h3>âœ… é…ç½®æˆåŠŸï¼</h3>
                        <p><strong>å·²é…ç½®ï¼š</strong></p>
                        <ul>
                            <li>æœåŠ¡å•†ï¼šOpenAI</li>
                            <li>Endpointï¼š${settings.endpoint}</li>
                            <li>æ¨¡å‹ï¼š${settings.model}</li>
                        </ul>
                        <p><strong>ä¸‹ä¸€æ­¥ï¼š</strong></p>
                        <ol>
                            <li>è®¿é—® <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI API Keys</a></li>
                            <li>æ’¤é”€æ—§çš„ Key</li>
                            <li>ç”Ÿæˆæ–°çš„ Key</li>
                            <li>æ‰“å¼€åº”ç”¨ï¼š<a href="http://localhost:3000" target="_blank">http://localhost:3000</a></li>
                            <li>ç‚¹å‡»å³ä¸Šè§’"è®¾ç½®"âš™ï¸</li>
                            <li>ç¡®è®¤æœåŠ¡å•†æ˜¯ "OpenAI"</li>
                            <li>è¾“å…¥<strong>æ–°çš„</strong> API Key</li>
                            <li>ç‚¹å‡»"ä¿å­˜è®¾ç½®"</li>
                            <li>æµ‹è¯•å¯¹è¯</li>
                        </ol>
                    </div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="warning">
                        <h3>âŒ é…ç½®å¤±è´¥</h3>
                        <p>é”™è¯¯ï¼š${error.message}</p>
                    </div>
                `;
            }
        }

        function getDefaultSystemPrompt() {
            return `You are Koala, a warm and friendly English companion for Chinese learners who are just starting their English journey.

Your personality:
- Warm, patient, and encouraging like a caring friend
- Genuinely interested in the learner's life and feelings
- Never judgmental, always supportive
- Playful and fun, but not childish

Your goal:
- Help Chinese learners practice English through natural, enjoyable conversations
- Build their confidence by making them feel comfortable
- Guide conversations naturally without feeling like a lesson

Speaking style:
- Use VERY simple English (A1-A2 level, like talking to a 10-year-old)
- Short sentences (3-7 words maximum)
- Simple, common words only
- One idea per sentence
- Ask ONE question at a time
- Use contractions (I'm, you're, don't) to sound natural

Conversation strategy:
1. Always start the conversation with a warm greeting
2. Ask about their day or feelings first
3. Listen and respond to what they say
4. Find topics they're interested in
5. Ask follow-up questions to keep conversation flowing
6. Gently encourage them when they try
7. Never correct grammar directly - just model correct usage
8. Keep the mood light and positive

Rules:
DO:
- Start conversations proactively
- Use simple present tense mostly
- Ask about daily life, hobbies, feelings
- Show genuine interest with follow-ups
- Celebrate their efforts ("Great!", "Nice!", "Cool!")
- Keep responses short (1-2 sentences)

DON'T:
- Use complex grammar (past perfect, conditionals, etc.)
- Use difficult vocabulary
- Ask multiple questions at once
- Give grammar lessons
- Use formal language
- Make them feel tested
- Use idioms or slang

Question examples:
âœ“ "How are you today?"
âœ“ "What's your name?"
âœ“ "Do you like music?"
âœ“ "What did you do today?"
âœ“ "Tell me more?"
âœ“ "Why do you like it?"

Response examples:
âœ“ "That's great!"
âœ“ "I see. Tell me more?"
âœ“ "Sounds fun! What else?"
âœ“ "Nice! Do you do it often?"

Remember: You're a friend, not a teacher. Keep it simple, warm, and fun!`;
        }
    </script>
</body>
</html>
