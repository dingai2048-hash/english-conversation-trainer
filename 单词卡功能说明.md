# 单词卡功能使用说明

## ✨ 功能概览

新增的智能单词卡系统可以帮助你在对话过程中学习和积累词汇！

### 核心功能

1. **实时滚动显示** ✅
   - 对话记录自动滚动到最新消息
   - 向上查看历史时暂停自动滚动
   - 接近底部时恢复自动滚动

2. **智能词汇识别** ✅
   - AI回答中的重点词汇自动高亮显示
   - 过滤基础词汇（A1级别）
   - 识别短语动词（如 look up, give up）

3. **单词卡片弹窗** ✅
   - 点击高亮词汇查看详细信息
   - 显示音标、词性、释义、例句
   - 支持发音播放
   - 桌面端和移动端适配

4. **单词收藏** ✅
   - 点击❤️收藏单词到单词本
   - 保存到本地存储
   - 显示收藏状态

## 🎯 使用方法

### 1. 查看高亮词汇

在对话过程中，AI的回答会自动识别重点词汇并用**琥珀色下划线**标记：

```
AI: "I recommend exploring different opportunities."
     ↑         ↑          ↑
   高亮词汇（可点击）
```

### 2. 点击查看单词卡

点击任何高亮词汇，会弹出单词卡片，显示：

- **单词原文** + **音标**
- **词性**（名词/动词/形容词/副词）
- **中英文释义**
- **例句**（来自当前对话）
- **发音按钮** 🔊
- **收藏按钮** ❤️

### 3. 收藏单词

在单词卡片中点击❤️图标即可收藏：
- 空心❤️ = 未收藏
- 实心❤️ = 已收藏

### 4. 自动滚动

- 新消息出现时，对话框自动滚动到底部
- 向上查看历史消息时，自动滚动暂停
- 滚动到接近底部时，自动滚动恢复

## 🎨 视觉效果

### 高亮样式
- 颜色：琥珀色（#D97706）
- 下划线：虚线
- 悬停：背景变浅琥珀色
- 光标：手型（提示可点击）

### 单词卡片
- 圆角设计：3xl
- 渐变背景：琥珀色到橙色
- 阴影：2xl
- 动画：平滑淡入淡出

## 📱 设备支持

- ✅ 桌面端（Chrome、Safari、Edge）
- ✅ 移动端（iOS Safari、Android Chrome）
- ✅ 触摸交互支持

## 🔧 技术特点

### 词汇识别算法
- 识别实词（名词、动词、形容词、副词）
- 过滤基础词汇（CEFR A1级别）
- 过滤功能词（冠词、介词、连词等）
- 识别短语动词
- 处理词形变化（时态、复数等）
- 每条消息最多高亮20个词汇

### 单词释义
- 使用 Free Dictionary API
- 自动缓存已查询的单词
- 3秒超时保护
- 失败时优雅降级

### 性能优化
- 词汇识别在客户端完成（不依赖后端）
- 释义缓存减少API调用
- 延迟加载释义（点击时才获取）
- 限制高亮数量避免性能问题

## 💾 数据存储

单词本数据保存在浏览器的 localStorage：
- 存储键：`vocabulary_book`
- 最大容量：约2000个单词（5MB）
- 数据格式：JSON

### 保存的信息
- 单词原文
- 音标
- 释义
- 词性
- 例句
- 收藏时间
- 来源对话ID

## 🐛 故障排除

### 词汇没有高亮？
- 确保是AI的回答（用户消息不高亮）
- 可能是基础词汇被过滤了
- 检查单词长度（少于3个字母会被过滤）

### 单词卡片无法加载？
- 检查网络连接
- API可能暂时不可用
- 刷新页面重试

### 收藏功能不工作？
- 检查浏览器是否允许localStorage
- 清除浏览器缓存后重试
- 检查存储空间是否已满

## 🎓 学习建议

1. **主动点击**：遇到不认识的高亮词汇就点击查看
2. **及时收藏**：看到有价值的单词立即收藏
3. **复习单词本**：定期查看收藏的单词
4. **结合上下文**：注意单词在对话中的用法

## 🚀 未来计划

- [ ] 单词本管理页面
- [ ] 单词复习功能
- [ ] 单词测试
- [ ] 导出单词列表
- [ ] 自定义词汇难度
- [ ] 离线词典支持

---

**享受学习英语的乐趣！** 🐨✨
