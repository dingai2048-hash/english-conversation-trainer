<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ ä¿®å¤é…ç½® - OpenAI API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 700px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
            text-align: center;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
            text-align: center;
        }
        
        .problem {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .problem h2 {
            color: #991b1b;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .problem p {
            color: #7f1d1d;
            line-height: 1.6;
        }
        
        .solution {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .solution h2 {
            color: #065f46;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .solution p {
            color: #064e3b;
            line-height: 1.6;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        
        .success {
            color: #10b981;
            font-weight: 600;
        }
        
        .error {
            color: #ef4444;
            font-weight: 600;
        }
        
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin-top: 10px;
            font-size: 13px;
        }
        
        .steps {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .steps h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .steps ol {
            margin-left: 20px;
            line-height: 2;
            color: #666;
        }
        
        .steps strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ä¿®å¤é…ç½®</h1>
        <p class="subtitle">å°† Anthropic API æ”¹ä¸º OpenAI API</p>
        
        <div class="problem">
            <h2>âŒ å‘ç°çš„é—®é¢˜</h2>
            <p>
                ä½ çš„é…ç½®è®¾ç½®æˆäº† <strong>Anthropic Claude API</strong>ï¼ˆ<code>api.anthropic.com</code>ï¼‰ï¼Œ
                ä½†ä½ æä¾›çš„æ˜¯ <strong>OpenAI API Key</strong>ï¼ˆ<code>sk-proj-...</code>ï¼‰ã€‚
            </p>
            <p style="margin-top: 10px;">
                è¿™å¯¼è‡´ API è°ƒç”¨å¤±è´¥ï¼Œå‡ºç° CORS é”™è¯¯ã€‚
            </p>
        </div>
        
        <div class="solution">
            <h2>âœ… è§£å†³æ–¹æ¡ˆ</h2>
            <p>
                ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œè‡ªåŠ¨å°†é…ç½®æ”¹ä¸º <strong>OpenAI API</strong>ã€‚
            </p>
            <p style="margin-top: 10px;">
                ä½ çš„ API Key ä¼šä¿ç•™ï¼Œåªæ˜¯æ”¹å˜ API ç«¯ç‚¹å’Œæ¨¡å‹ã€‚
            </p>
        </div>
        
        <button onclick="fixConfig()">ğŸ”§ ç«‹å³ä¿®å¤é…ç½®</button>
        
        <div id="result" class="result"></div>
        
        <div class="steps">
            <h3>ğŸ“‹ ä¿®å¤åçš„æ­¥éª¤</h3>
            <ol>
                <li><strong>åˆ·æ–°æµè§ˆå™¨</strong>ï¼ˆCmd + Shift + Rï¼‰</li>
                <li><strong>ç‚¹å‡»éº¦å…‹é£</strong></li>
                <li><strong>è¯´è‹±è¯­</strong>ï¼ˆä¾‹å¦‚ï¼š"Hello, how are you?"ï¼‰</li>
                <li><strong>ç­‰å¾… AI å›å¤</strong></li>
            </ol>
        </div>
    </div>

    <script>
        function fixConfig() {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p>â³ æ­£åœ¨ä¿®å¤é…ç½®...</p>';
            
            try {
                // è¯»å–å½“å‰é…ç½®
                const settingsStr = localStorage.getItem('ai-conversation-settings');
                
                if (!settingsStr) {
                    resultDiv.innerHTML = '<p class="error">âŒ æœªæ‰¾åˆ°é…ç½®</p>';
                    return;
                }
                
                const settings = JSON.parse(settingsStr);
                
                // æ˜¾ç¤ºå½“å‰é…ç½®
                let html = '<h3>å½“å‰é…ç½®ï¼š</h3><pre>';
                html += `æä¾›å•†: ${settings.provider}\n`;
                html += `ç«¯ç‚¹: ${settings.endpoint}\n`;
                html += `æ¨¡å‹: ${settings.model}\n`;
                html += `API Key: ${settings.apiKey ? settings.apiKey.substring(0, 20) + '...' : 'æœªè®¾ç½®'}\n`;
                html += '</pre>';
                
                // ä¿®å¤é…ç½®
                settings.provider = 'openai';
                settings.endpoint = 'https://api.openai.com/v1/chat/completions';
                settings.model = 'gpt-4o';
                
                // ä¿å­˜é…ç½®
                localStorage.setItem('ai-conversation-settings', JSON.stringify(settings));
                
                // æ˜¾ç¤ºæ–°é…ç½®
                html += '<h3 style="margin-top: 20px;">âœ… ä¿®å¤åçš„é…ç½®ï¼š</h3><pre>';
                html += `æä¾›å•†: ${settings.provider}\n`;
                html += `ç«¯ç‚¹: ${settings.endpoint}\n`;
                html += `æ¨¡å‹: ${settings.model}\n`;
                html += `API Key: ${settings.apiKey ? settings.apiKey.substring(0, 20) + '...' : 'æœªè®¾ç½®'}\n`;
                html += '</pre>';
                
                html += '<p class="success" style="margin-top: 20px;">âœ… é…ç½®å·²ä¿®å¤ï¼</p>';
                html += '<p style="margin-top: 10px; color: #666;">ç°åœ¨è¯·ï¼š</p>';
                html += '<ol style="margin-left: 20px; margin-top: 10px; color: #666; line-height: 1.8;">';
                html += '<li>åˆ·æ–°æµè§ˆå™¨ï¼ˆCmd + Shift + Rï¼‰</li>';
                html += '<li>ç‚¹å‡»éº¦å…‹é£è¯´è¯</li>';
                html += '<li>ç­‰å¾… AI å›å¤</li>';
                html += '</ol>';
                
                resultDiv.innerHTML = html;
                
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">âŒ ä¿®å¤å¤±è´¥: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
