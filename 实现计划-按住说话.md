# ğŸ¤ å®ç°è®¡åˆ’ï¼šæŒ‰ä½è¯´è¯ï¼ˆPush-to-Talkï¼‰

## ğŸ¯ ç›®æ ‡

å®Œå…¨æ¨¡ä»¿ GetFluently.app çš„äº¤äº’æ–¹å¼ï¼š
- **æŒ‰ä½æŒ‰é’®** â†’ å¼€å§‹å½•éŸ³
- **æ¾å¼€æŒ‰é’®** â†’ åœæ­¢å½•éŸ³å¹¶æäº¤
- **AI å›å¤** â†’ ç­‰å¾…ä¸‹ä¸€æ¬¡æŒ‰ä½
- **ç®€å•ç›´è§‚** â†’ ç±»ä¼¼å¾®ä¿¡è¯­éŸ³

## ğŸ“‹ å®ç°æ­¥éª¤

### Step 1ï¼šç§»é™¤ä¼šè¯ç®¡ç†

- [ ] ç§»é™¤ `isInSession` çŠ¶æ€
- [ ] ç§»é™¤ `startSession` / `endSession` åŠŸèƒ½
- [ ] ç§»é™¤"å¼€å§‹å¯¹è¯"æŒ‰é’®
- [ ] ç§»é™¤"ç»“æŸå¯¹è¯"æŒ‰é’®

### Step 2ï¼šç§»é™¤è‡ªåŠ¨åŠŸèƒ½

- [ ] ç§»é™¤è‡ªåŠ¨é™éŸ³æ£€æµ‹
- [ ] ç§»é™¤è‡ªåŠ¨å½•éŸ³å¾ªç¯
- [ ] ç§»é™¤ `onAutoStop` å›è°ƒ
- [ ] ç§»é™¤ `useEffect` è‡ªåŠ¨å½•éŸ³é€»è¾‘

### Step 3ï¼šå®ç°æŒ‰ä½è¯´è¯

- [ ] æ·»åŠ  `onMouseDown` / `onTouchStart` äº‹ä»¶ï¼ˆå¼€å§‹å½•éŸ³ï¼‰
- [ ] æ·»åŠ  `onMouseUp` / `onTouchEnd` äº‹ä»¶ï¼ˆåœæ­¢å½•éŸ³ï¼‰
- [ ] æ·»åŠ  `onMouseLeave` äº‹ä»¶ï¼ˆå–æ¶ˆå½•éŸ³ï¼‰
- [ ] å¤„ç†å½•éŸ³çŠ¶æ€åˆ‡æ¢

### Step 4ï¼šæ›´æ–° UI

- [ ] æ¡Œé¢ç«¯ï¼šå¤§æŒ‰é’®"æŒ‰ä½è¯´è¯"
- [ ] ç§»åŠ¨ç«¯ï¼šå¤§æŒ‰é’®"æŒ‰ä½è¯´è¯"
- [ ] å½•éŸ³æ—¶ï¼šæŒ‰é’®å˜çº¢ + "æ­£åœ¨å½•éŸ³..."
- [ ] AI è¯´è¯æ—¶ï¼šæŒ‰é’®ç¦ç”¨ + "AI æ­£åœ¨è¯´è¯..."
- [ ] è¯†åˆ«æ—¶ï¼šæŒ‰é’®ç¦ç”¨ + "æ­£åœ¨è¯†åˆ«..."

### Step 5ï¼šä¼˜åŒ–ä½“éªŒ

- [ ] æ·»åŠ æŒ‰é’®åŠ¨ç”»
- [ ] æ·»åŠ è§¦è§‰åé¦ˆï¼ˆç§»åŠ¨ç«¯ï¼‰
- [ ] ä¼˜åŒ–æŒ‰é’®æ ·å¼
- [ ] æ·»åŠ çŠ¶æ€æç¤º

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒé€»è¾‘

```typescript
// æŒ‰ä½å¼€å§‹å½•éŸ³
const handlePressStart = async () => {
  if (isProcessing || isSpeaking) return;
  
  try {
    await sttServiceRef.current.startRecording();
    setRecording(true);
  } catch (err) {
    setError('æ— æ³•è®¿é—®éº¦å…‹é£');
  }
};

// æ¾å¼€åœæ­¢å½•éŸ³
const handlePressEnd = async () => {
  if (!isRecording) return;
  
  setRecording(false);
  setProcessing(true);
  
  try {
    const text = await sttServiceRef.current.stopRecording();
    
    if (text.trim() && text.trim().length >= 5) {
      addMessage('user', text);
      
      // AI å›å¤
      const aiResponse = await aiServiceRef.current.sendMessage(text, messages);
      addMessage('assistant', aiResponse);
      
      // TTS æ’­æ”¾
      setSpeaking(true);
      await ttsServiceRef.current.speak(aiResponse, 'en-US');
      setSpeaking(false);
    }
  } catch (err) {
    setError('è¯†åˆ«å¤±è´¥');
  } finally {
    setProcessing(false);
  }
};
```

### UI å®ç°

```tsx
<button
  onMouseDown={handlePressStart}
  onMouseUp={handlePressEnd}
  onMouseLeave={handlePressEnd}
  onTouchStart={handlePressStart}
  onTouchEnd={handlePressEnd}
  disabled={isProcessing || isSpeaking}
  className={cn(
    "w-32 h-32 rounded-full",
    isRecording ? "bg-red-500" : "bg-blue-500"
  )}
>
  {isRecording ? "ğŸ¤ æ­£åœ¨å½•éŸ³..." : "æŒ‰ä½è¯´è¯"}
</button>
```

## ğŸ¨ UI è®¾è®¡

### åˆå§‹çŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚    ğŸ¨ Koala        â”‚
â”‚                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ æŒ‰ä½è¯´è¯  â”‚    â”‚ â† è“è‰²å¤§æŒ‰é’®
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚
â”‚  æŒ‰ä½æŒ‰é’®å¼€å§‹è¯´è¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å½•éŸ³çŠ¶æ€ï¼ˆæŒ‰ä½æ—¶ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚    ğŸ¨ Koala        â”‚
â”‚   (listening)       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ğŸ¤æ­£åœ¨å½•éŸ³ â”‚    â”‚ â† çº¢è‰²
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚
â”‚  æ¾å¼€æŒ‰é’®åœæ­¢å½•éŸ³   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI å›å¤çŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚    ğŸ¨ Koala        â”‚
â”‚   (speaking)        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ æŒ‰ä½è¯´è¯  â”‚    â”‚ â† ç°è‰²ç¦ç”¨
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                     â”‚
â”‚  ğŸ—£ï¸ AI æ­£åœ¨è¯´è¯...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… å®Œæˆæ ‡å‡†

- [ ] æŒ‰ä½æŒ‰é’®ç«‹å³å¼€å§‹å½•éŸ³
- [ ] æ¾å¼€æŒ‰é’®ç«‹å³åœæ­¢å½•éŸ³
- [ ] ä¸ä¼šè‡ªåŠ¨å½•éŸ³
- [ ] ä¸ä¼šè¯¯è§¦å‘
- [ ] AI è¯´å®Œåç­‰å¾…ä¸‹ä¸€æ¬¡æŒ‰ä½
- [ ] æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯éƒ½æ”¯æŒ
- [ ] äº¤äº’æµç•…è‡ªç„¶

## ğŸš€ å¼€å§‹å®ç°

ç°åœ¨å¼€å§‹å®ç°ï¼
