# 测试单词卡功能

## 🧪 快速测试步骤

### 1. 启动应用
```bash
cd english-conversation-trainer
npm start
```

访问：http://localhost:3000

### 2. 开始对话

1. 点击"开始新对话"按钮
2. 按住麦克风按钮说话（或等待AI主动说话）

### 3. 测试词汇高亮

观察AI的回答，应该看到：
- 重点词汇用**琥珀色虚线下划线**标记
- 鼠标悬停时背景变浅琥珀色
- 光标变成手型

**示例对话**：
```
你: "Hello, how are you?"
AI: "I'm doing great! How can I help you today?"
     ↑      ↑      ↑
   应该高亮的词汇
```

### 4. 测试单词卡片

1. **点击任意高亮词汇**
2. 应该弹出单词卡片，显示：
   - 单词原文 + 音标
   - 词性标签（名词/动词/形容词/副词）
   - 释义
   - 例句
   - 发音按钮 🔊
   - 收藏按钮 ❤️

3. **测试发音**：
   - 点击🔊按钮
   - 应该听到单词发音
   - 按钮显示加载动画

4. **测试收藏**：
   - 点击❤️按钮
   - 图标变成实心红色
   - 再次点击取消收藏

5. **关闭卡片**：
   - 点击X按钮
   - 或点击卡片外部

### 5. 测试自动滚动

1. **新消息自动滚动**：
   - 发送多条消息
   - 对话框应自动滚动到底部

2. **暂停自动滚动**：
   - 向上滚动查看历史消息
   - 发送新消息时不应自动滚动

3. **恢复自动滚动**：
   - 滚动到接近底部（距离底部<100px）
   - 发送新消息时应恢复自动滚动

### 6. 测试移动端

使用Chrome DevTools设备模拟：
1. 按 **F12** 打开开发者工具
2. 按 **Cmd+Shift+M** 切换设备模拟
3. 选择 iPhone 或 iPad
4. 重复上述测试步骤

## 🔍 检查点

### ✅ 词汇识别
- [ ] AI回答中的重点词汇被高亮
- [ ] 用户消息不高亮
- [ ] 基础词汇（a, the, is, are等）不高亮
- [ ] 短语动词被识别（如 look up）
- [ ] 每条消息最多20个高亮词汇

### ✅ 单词卡片
- [ ] 点击词汇弹出卡片
- [ ] 显示音标和释义
- [ ] 发音功能正常
- [ ] 收藏功能正常
- [ ] 关闭功能正常
- [ ] 桌面端和移动端都正常显示

### ✅ 自动滚动
- [ ] 新消息自动滚动到底部
- [ ] 向上查看时暂停滚动
- [ ] 接近底部时恢复滚动
- [ ] 桌面端和移动端都正常

### ✅ 性能
- [ ] 词汇识别不卡顿
- [ ] 滚动流畅
- [ ] 单词卡片打开快速
- [ ] 没有明显延迟

## 🐛 常见问题

### 词汇没有高亮？
**可能原因**：
1. 是用户消息（只高亮AI消息）
2. 是基础词汇被过滤了
3. 单词太短（<3个字母）

**解决方法**：
- 让AI说更复杂的句子
- 检查控制台是否有错误

### 单词卡片无法加载？
**可能原因**：
1. 网络问题
2. API限流

**解决方法**：
- 检查网络连接
- 打开控制台查看错误信息
- 等待几秒后重试

### 自动滚动不工作？
**可能原因**：
1. 容器引用未正确设置
2. 滚动事件未触发

**解决方法**：
- 刷新页面
- 检查控制台错误
- 手动滚动到底部测试

## 📊 测试数据

### 推荐测试对话

**简单对话**：
```
你: "Tell me about your hobbies"
AI: "I enjoy reading books and exploring new technologies."
```
应该高亮：enjoy, reading, books, exploring, technologies

**复杂对话**：
```
你: "What's the weather like?"
AI: "The weather is absolutely magnificent today! The temperature is comfortable and the sky is crystal clear."
```
应该高亮：absolutely, magnificent, temperature, comfortable, crystal, clear

**短语动词**：
```
你: "I need help"
AI: "Sure! Let me look up some information for you. Don't give up!"
```
应该高亮：look up, give up, information

## 🎯 预期结果

### 正常情况
- ✅ 词汇高亮准确
- ✅ 单词卡片显示完整
- ✅ 发音清晰
- ✅ 收藏功能正常
- ✅ 自动滚动流畅
- ✅ 无性能问题

### 边界情况
- ✅ 空消息不崩溃
- ✅ 超长消息正常处理
- ✅ 网络错误优雅降级
- ✅ 重复点击不出错

---

**测试愉快！** 🎉

如果发现问题，请查看浏览器控制台的错误信息。
